# Руководство пользователя CHTZ Generator

## 1. Введение

CHTZ Generator — инструмент для создания документов ЧТЗ (Частное техническое задание) в формате Microsoft Word из простых текстовых файлов Markdown.

### Преимущества

- ✅ **Простота** — пишите в текстовом редакторе или IDE
- ✅ **Версионирование** — храните документы в Git
- ✅ **Автоматизация** — генерируйте docx одной командой
- ✅ **Единообразие** — все документы соответствуют корпоративному шаблону
- ✅ **ИИ-совместимость** — формат легко генерируется языковыми моделями

## 2. Установка

### Требования

- Node.js 18 или новее
- npm

### Установка

```bash
# Клонируйте репозиторий
git clone <repository-url>
cd chtz-generator

# Установите зависимости
npm install

# Проверьте установку
node bin/chtz-generate.js --version
```

## 3. Быстрый старт

### Шаг 1: Создайте файл документа

Создайте файл `my-chtz.md`:

```markdown
---
type: chtz
version: "1.0"

metadata:
  shortName: "Название вашего изменения"
  consultant:
    name: "Ваше Имя"
    email: "email@company.ru"
  organization: "Название организации"
  itSolutions:
    - "Название системы"
  itSystems:
    - "ИТ-система"
  processKT: false
  processPDn: false
  createdDate: "15.01.2025"
---

# 1. Термины и определения

:::terms
| Термин | Определение |
|--------|-------------|
| ЧТЗ | Частное техническое задание |
:::

# 2. Описание требований

Ваше описание здесь...
```

### Шаг 2: Сгенерируйте документ

```bash
node bin/chtz-generate.js my-chtz.md -o my-chtz.docx
```

### Шаг 3: Откройте результат

Откройте `my-chtz.docx` в Microsoft Word.

## 4. Использование CLI

### Базовая команда

```bash
chtz-generate <input> [options]
```

### Опции

| Опция | Описание |
|-------|----------|
| `-o, --output <path>` | Путь для выходного файла |
| `-t, --template <path>` | Путь к кастомному шаблону |
| `-i, --images <dir>` | Директория с изображениями |
| `-v, --verbose` | Подробный вывод |
| `--validate-only` | Только проверка без генерации |

### Примеры

```bash
# Базовое использование
node bin/chtz-generate.js document.md

# С указанием выходного файла
node bin/chtz-generate.js document.md -o ЧТЗ_Проект.docx

# С подробным выводом
node bin/chtz-generate.js document.md -v

# Только валидация
node bin/chtz-generate.js document.md --validate-only

# С изображениями из другой папки
node bin/chtz-generate.js document.md -i ./screenshots
```

## 5. Структура документа

### YAML Front Matter

В начале файла обязательно указывается блок метаданных:

```yaml
---
type: chtz                    # Обязательно: тип документа
version: "1.0"                # Версия документа

metadata:
  shortName: "Название"       # Обязательно: краткое название
  consultant:
    name: "ФИО"               # Обязательно: имя консультанта
    email: "email"            # Email консультанта
  organization: "Компания"    # Обязательно: организация
  itSolutions: ["Система"]    # ИТ-решения
  itSystems: ["Подсистема"]   # ИТ-системы
  processKT: false            # Обработка КТ
  processPDn: false           # Обработка ПДн
  createdDate: "01.01.2025"   # Дата создания

history:                      # История изменений
  - version: "1.0"
    date: "01.01.2025"
    comment: "Первая версия"
    author: "Автор"

relatedDocs:                  # Связанные документы
  - name: "Документ"
    version: "1.0"
    date: "01.01.2025"
---
```

### Разделы документа

Стандартная структура ЧТЗ:

1. Термины, определения и сокращения
2. Исходные данные
3. Описание изменений
4. Описание требований
5. Требования к интерфейсу
6. Требования к интеграции
7. Изменения ролевой модели
8. Требования к отчётности
9. Требования к миграции данных
10. Приложения

## 6. Работа с изображениями

### Добавление изображений

```markdown
![Описание](./images/screenshot.png)
```

### Указание размера

```markdown
![Описание](./images/screenshot.png){width="70%"}
```

### Организация файлов

```
project/
├── document.md
└── images/
    ├── screen1.png
    ├── screen2.png
    └── diagram.png
```

## 7. Типичные ошибки

### Ошибка: "YAML front matter не найден"

**Причина:** Файл не начинается с `---`

**Решение:** Убедитесь, что файл начинается с:
```yaml
---
type: chtz
...
---
```

### Ошибка: "Отсутствует обязательное поле"

**Причина:** Не заполнено одно из обязательных полей

**Решение:** Добавьте недостающее поле в YAML

### Ошибка: "Изображение не найдено"

**Причина:** Путь к изображению указан неверно

**Решение:** 
- Проверьте путь к файлу
- Используйте относительные пути от файла .md
- Укажите директорию с изображениями: `-i ./images`

## 8. Советы

### Используйте VS Code

Установите расширения:
- Markdown All in One
- YAML

### Проверяйте перед генерацией

```bash
node bin/chtz-generate.js document.md --validate-only
```

### Храните в Git

```bash
git add document.md images/
git commit -m "Обновление ЧТЗ"
```

### Автоматизируйте с помощью npm scripts

Добавьте в `package.json`:
```json
{
  "scripts": {
    "build:chtz": "node bin/chtz-generate.js docs/chtz.md -o output/ЧТЗ.docx"
  }
}
```

## 9. Контакты

При возникновении проблем обращайтесь к администратору системы.
