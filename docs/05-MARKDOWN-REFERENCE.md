# Справочник по формату Markdown для ЧТЗ

## 1. Базовый синтаксис Markdown

### Заголовки

```markdown
# Заголовок 1 уровня
## Заголовок 2 уровня
### Заголовок 3 уровня
```

### Форматирование текста

```markdown
**Жирный текст**
*Курсивный текст*
***Жирный и курсивный***
~~Зачёркнутый~~
```

### Списки

#### Маркированный список

```markdown
- Первый пункт
- Второй пункт
  - Вложенный пункт
  - Ещё вложенный
- Третий пункт
```

#### Нумерованный список

```markdown
1. Первый пункт
2. Второй пункт
   1. Вложенный пункт
   2. Ещё вложенный
3. Третий пункт
```

### Ссылки

```markdown
[Текст ссылки](https://example.com)
[Внутренняя ссылка](#section-id)
```

### Изображения

```markdown
![Альтернативный текст](./images/image.png)
![С размером](./images/image.png){width="70%"}
```

### Таблицы

```markdown
| Заголовок 1 | Заголовок 2 | Заголовок 3 |
|-------------|-------------|-------------|
| Ячейка 1    | Ячейка 2    | Ячейка 3    |
| Ячейка 4    | Ячейка 5    | Ячейка 6    |
```

---

## 2. Специальные директивы ЧТЗ

### Таблица терминов `:::terms`

Используется для раздела "Термины и определения".

```markdown
:::terms
| Термин | Определение |
|--------|-------------|
| ЧТЗ | Частное техническое задание |
| ЮЗЭДО | Юридически значимый электронный документооборот |
| ЭП | Электронная подпись |
:::
```

**Результат:** Таблица с заголовком и стилизованными строками.

---

### Таблица изменений `:::changes-table`

Используется для сравнения "Как есть" / "Как будет".

```markdown
:::changes-table
| Описание функции «Как есть» | Описание функции «Как будет» |
|-----------------------------|------------------------------|
| Текущее поведение | Новое поведение |
| Старый интерфейс | Обновлённый интерфейс |
:::
```

**Результат:** Двухколоночная таблица сравнения.

---

### Функциональная таблица `:::function-table`

Основной элемент для описания требований.

```markdown
:::function-table{#func-1}
function: Название функции
task: STIUM-2767
taskUrl: https://jira.example.com/browse/TASK-123
scenario: |
  **Предусловия:**
  - Пользователь авторизован
  - Установлены права доступа

  **Основной сценарий:**
  1. Пользователь открывает страницу
  2. Нажимает кнопку «Действие»
  3. Система выполняет операцию
  4. Отображается результат

  **Альтернативный сценарий:**
  - Если ошибка — показать сообщение

  **Ограничения:**
  - Максимум 100 записей
:::
```

**Атрибуты:**
- `{#func-1}` — ID для перекрёстных ссылок (опционально)
- `function` — описание функции
- `task` — номер задачи
- `taskUrl` — ссылка на задачу (будет гиперссылкой)
- `scenario` — многострочное описание сценария

**Форматирование в сценарии:**
- `**текст**` — жирный
- `1. пункт` — нумерованный список
- `- пункт` — маркированный список

---

### Блок примечания `:::note`

```markdown
:::note{type="info"}
Информационное сообщение для пользователя.
:::

:::note{type="warning"}
**Внимание:** Важное предупреждение.
:::

:::note{type="danger"}
**Критично:** Ограничение системы.
:::
```

**Типы:**
- `info` — информация (синий фон)
- `warning` — предупреждение (жёлтый фон)
- `danger` — критично (красный фон)

---

### Пустой раздел `:::empty-section`

Когда раздел не применим для документа.

```markdown
:::empty-section
Раздел не применим для данного документа.
:::
```

**Результат:** Курсивный серый текст.

---

## 3. YAML Front Matter

### Полная структура

```yaml
---
# Тип документа (обязательно)
type: chtz

# Версия документа
version: "1.0"

# Метаданные (обязательно)
metadata:
  # Краткое название изменения (обязательно)
  shortName: "Подписание документов в ЮЗЭДО"
  
  # Консультант (обязательно)
  consultant:
    name: "Иванов Иван Иванович"
    email: "ivanov@company.ru"
  
  # Организация заказчика (обязательно)
  organization: "ООО «Компания»"
  
  # ИТ-решения (массив)
  itSolutions:
    - "Система"
    - "Другая система"
  
  # ИТ-системы (массив)
  itSystems:
    - "Юридический ЭДО"
  
  # Обработка данных КТ (true/false)
  processKT: false
  
  # Обработка данных ПДн (true/false)
  processPDn: true
  
  # Дата создания (формат DD.MM.YYYY)
  createdDate: "15.01.2025"

# История изменений (опционально)
history:
  - version: "1.0"
    date: "15.01.2025"
    comment: "Первоначальная версия"
    author: "Иванов И.И."
  - version: "1.1"
    date: "20.01.2025"
    comment: "Добавлен раздел интеграции"
    author: "Петров П.П."

# Связанные документы (опционально)
relatedDocs:
  - name: "Техническое задание на Система"
    version: "2.5"
    date: "01.12.2024"
  - name: "Регламент ЭДО"
    version: "1.0"
    date: "15.11.2024"
---
```

### Обязательные поля

| Поле | Описание |
|------|----------|
| `type` | Должно быть `chtz` |
| `metadata.shortName` | Краткое название изменения |
| `metadata.consultant.name` | ФИО консультанта |
| `metadata.organization` | Название организации |

---

## 4. Примеры

### Минимальный документ

```markdown
---
type: chtz
version: "1.0"
metadata:
  shortName: "Исправление ошибки авторизации"
  consultant:
    name: "Иванов И.И."
    email: "ivanov@mail.ru"
  organization: "ООО Компания"
  createdDate: "15.01.2025"
---

# 1. Описание проблемы

Пользователи не могут авторизоваться в системе.

# 2. Требования

:::function-table
function: Исправление авторизации
task: BUG-123
scenario: |
  1. Пользователь вводит логин/пароль
  2. Система проверяет данные
  3. Пользователь успешно авторизован
:::
```

### Полный документ

См. файл `examples/full/document.md` в репозитории.

---

## 5. Перекрёстные ссылки

### Создание якоря

```markdown
:::function-table{#req-auth}
function: Авторизация
...
:::
```

### Ссылка на якорь

```markdown
См. требование [Авторизация](#req-auth).
```

---

## 6. Рекомендации

### Структура файлов

```
project/
├── chtz.md              # Основной документ
├── images/              # Изображения
│   ├── screen1.png
│   └── diagram.png
└── output/              # Сгенерированные документы
    └── ЧТЗ.docx
```

### Именование

- Используйте понятные имена файлов
- Нумеруйте изображения по порядку
- Используйте ID для функциональных таблиц

### Форматирование

- Оставляйте пустые строки между разделами
- Используйте 2 пробела для отступов в YAML
- Не используйте табуляцию

---

## 7. Ограничения

| Элемент | Ограничение |
|---------|-------------|
| Заголовки | Максимум 3 уровня |
| Списки | Максимум 3 уровня вложенности |
| Изображения | Только локальные файлы (PNG, JPG, GIF) |
| Таблицы | Без объединения ячеек в Markdown |
| Формулы | Не поддерживаются |
